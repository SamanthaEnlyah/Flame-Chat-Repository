<link rel="stylesheet" href="../css/bootstrap.min.css"/>
<link rel="stylesheet" href="../css/style.css"/>
<script src="../js/jquery-3.7.1.js"></script>
<script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>
<script src="../js/interior-iframe.js"></script>
<br>

<h2>Steps for running from Visual Studio 2022</h2>
<br>
<h4>1. Open solution: "04 Code/FlameChat2/FlameChat2.sln"</h4>
<br>

<h4>2. Examine Visual Studio Solution projects</h4>

<p>Application consists of 7 projects.</p>

<p>There are three WPF GUI projects:</p>

<ol>
<li>Flame Chat Admin (GUI project) (which is under development, only one feature works, and that is "insert list of personality traits in db")</li>

<li>Flame Chat Client (GUI project) - This is a client for chatting. It is the part of the app that regular users use. It communicates with the Server.

<p>Some important classes in this project are:</p>

<p> Client.cs - which sends commands to the Server. </p>

<p> Client Operation classes - these are classes that call SendCommand method from Client.cs and pass the command to be executed and an object needed for its execution:</p>
<ul>
<li>RegularUserSignUp</li>
<li>RegularUserLogin and Logout</li>
<li>PersonalityTraitOp</li>
<li>ContactsOp</li>
<li>ChatUserOp</li>
<li>ChatManager</li>
<li>MessagesOp</li>
<li>Avatar</li>
</ul>

<p>SessionManager and SessionData are used to save session to client, so that user can login once and remain logged in.</p>
</li>

<li>Flame Chat Server (GUI project) - This is part of app that is used to receive commands form Client (like send messages from one client to another and getting user data from db), and deal with the database.</li>

- Other projects are Class Libraries and they are used (referenced) in GUI projects:

<li>FlameChatDatabaseLibrary - This contains only PasswordHasher, and methods for SignUp and Login.</li>

<li>SharedModel - Model contains Model classes auto generated by Entity Framework. Classes like ChatUser, Message, PersonalityTrait, UserHasContact.</li>

<li>SharedAdmin - AdminUserAllowedCommands.cs - enum that contains all commands that Admin client can send to the Server.</li>

<li>SharedRegularUser - RegularUserAllowedCommands.cs - enum that contains all commands that Regular user client can send to the Server.</li>


</ol>



<h4>3. Click Start</h4>

<p>Two projects will start: FlameChatServer and FlameChatClient.</p>

<p>For both applications several windows will open. Deal with them in this order (Server has to be started before clients start connecting, so do the server windows first):</p>

    <p>3.1. For Server:</p>
      <p> 1) "Server IP Chooser" window  - This is in case your computer is connected to multiple networks, and application doesn't know which IP to use. </p>
        <p>	You choose the IP on the network that you want your server to start on.</p>
        <p> Select the IP.</p>
        <p> SQL server has an instance id. You need to find out what is it and type it Server instance id text field.</p>
        <p>	MessageBox will appear to tell you which IP address you used.</p>
        <p> Click OK.</p>
        <p> Server will start at chosen IP address and start broadcasting that address.</p>
        <p> Server will also connect with connection string to database. </p>

      <p> 2) "Server Messages" window  - it is a log window, used for debugging the server.</p>

    <p>3.2. For Client:</p>

<p> 1)	"Welcome to FlameChat" dialog  - click OK.</p>

<p> 2)	"Flame Chat Client Log in/Sign up" window - This window contains two options, Log In and Sign Up. Log in or Sign Up as described in Manual.</p>
             
           <p> If you want to test chatting from Visual Studio, you need at least two FlameChatClients open. Starting from Visual Studio will run only one FlameChatClient.</p>

           <p> You can do two things to run second client:</p>
        <p>2.1)	If you changed the code, you will need to build and copy client project. </p>
        <p>After building, copy all content from debug folder in project FlameChat2 elsewhere (copy this folder: "04 Code/FlameChat2/FlameChat2/bin/Debug/net9.0-windows" to "03 Application/Client 3"). </p>
        <p>Inside that folder delete file "Client 3/session/session.json" and run FlameChatClient.exe. This is so that you wouldn't get same person logged in while testing. </p>
        <p>If you don't want to delete the file manually, you can also let it login automatically, then logout and log in again. Logging out deletes this file.</p>

		<p>2.2) If you didn't change anything, you can simply run "03 - Application/Client 1/net9.0-windows/FlameChatClient2.exe"" to act as second user (first user is that one running in VS).  </p>

	   

<h3>Note:</h3>
<p>It can happen that windows sometimes freeze. Just wait a little if this happens, or close and start again. 
    If it seems to you that you did not click Login or Sign up, if it seems its not reacting, just wait.
</p>
<p>It can get cluttered on screen since there will be many windows open. I suggest first trying out compiled code, from folder "03 Application", because you can see what windows appear as you start each .exe.</p>
<p>When you start projects it gets confusing because two projects are started at the same time. </p>

<p>If you start projects from VS here is what you need to do:</p>
<ol>
<li>Ignore "Welcome to Flame Chat!" dialog.</li>
<li>Look for Server IP Address Chooser. You may have to click on other window first and then on IP Address Chooser, because sometimes it gets stuck behind Server Messages and it won't come to the front, even though it is focused.</li>
Choose an IP address, enter SQL Express instance id (name) and click OK.</li>
<li>Now you can click OK on "Welcome to FlameChat!" dialog.</li>
<li>If already logged in, wait until the Chat Window appears and Profile button becomes enabled.</li>
<li>Now you can use the program as described in Manual.</li>
</ol>